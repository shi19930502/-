webpackJsonp([60],{E58b:function(t,e,i){"use strict";e.a={data:function(){return{show1:!1,partList:[],userList:[],userPopup:!1,checkList:[],allowTimeStart:"00:00",allowTimeEnd:"23:59",isEdit:!0,form:{nickName:"",loginName:"",mobile:"",identityCard:"",password:"",status:!0,allowTimeStart:"00:00",allowTimeEnd:"23:59",extend:""},password2:"",userId:""}},watch:{allowTimeStart:function(t,e){var i=t.split(":")[0]>10?t.split(":")[0]:parseFloat(t.split(":")[0])+0,s=this.allowTimeEnd.split(":")[0]>10?this.allowTimeEnd.split(":")[0]:parseFloat(this.allowTimeEnd.split(":")[0])+0,l=t.split(":")[1]>10?t.split(":")[1]:parseFloat(t.split(":")[1])+0,a=this.allowTimeEnd.split(":")[1]>10?this.allowTimeEnd.split(":")[1]:parseFloat(this.allowTimeEnd.split(":")[1])+0;i>s?(this.$dialog.toast({mes:"结束时间不能小于开始时间，以为你重置结束时间",timeout:2e3}),this.allowTimeEnd="23:59"):i==s&&l>a&&(this.$dialog.toast({mes:"结束时间不能小于开始时间，以为你重置结束时间",timeout:2e3}),this.allowTimeEnd="23:59")},allowTimeEnd:function(t,e){var i=t.split(":")[0]>10?t.split(":")[0]:parseFloat(t.split(":")[0])+0,s=this.allowTimeStart.split(":")[0]>10?this.allowTimeStart.split(":")[0]:parseFloat(this.allowTimeStart.split(":")[0])+0,l=t.split(":")[1]>10?t.split(":")[1]:parseFloat(t.split(":")[1])+0,a=this.allowTimeStart.split(":")[1]>10?this.allowTimeStart.split(":")[1]:parseFloat(this.allowTimeStart.split(":")[1])+0;s>i?(this.$dialog.toast({mes:"结束时间不能小于开始时间，以为你重置结束时间",timeout:2e3}),this.allowTimeEnd="23:59"):i==s&&a>l&&(this.$dialog.toast({mes:"结束时间不能小于开始时间，以为你重置结束时间",timeout:2e3}),this.allowTimeEnd="23:59")}},created:function(){this.$store.dispatch("changeNavBarTitle","用户管理")},mounted:function(){this.init()},methods:{init:function(){this.getPartList(),this.userId=this.$route.query.userId,this.userId&&(this.getUser(),this.getRolesByUserId())},getPartList:function(){var t=this;this.$dialog.loading.open("数据加载中..."),this.postRequest("/permission/tsysRole/list",{statu:1}).then(function(e){0==e.data.state&&(t.$dialog.loading.close(),t.partList=e.data.aaData)})},getRolesByUserId:function(){var t=this;this.postRequest("/permission/tsysRoleUser/getRolesByUserId",{userId:this.userId}).then(function(e){0==e.data.state&&e.data.aaData.forEach(function(e){t.checkList.push(e.id)})})},getUser:function(){var t=this;this.postRequest("/user/user/list",{userId:this.userId,statu:"",nickName:"",loginName:"",pageNum:1,pageSize:4}).then(function(e){if(0==e.data.state){t.isEdit=!1,t.form.nickName=e.data.aaData[0].nickName,t.form.loginName=e.data.aaData[0].loginName,t.form.mobile=e.data.aaData[0].mobile,t.form.status=!!e.data.aaData[0].status,t.form.userId=e.data.aaData[0].userId,t.form.extend=e.data.aaData[0].extend;var i=e.data.aaData[0].allowTimeStart,s=e.data.aaData[0].allowTimeEnd,l=[],a=[];l=i?i.split(":")[0]+":"+i.split(":")[1]:"00:00",a=s?s.split(":")[0]+":"+s.split(":")[1]:"23:59",t.allowTimeStart=t.form.allowTimeStart=l,t.allowTimeEnd=t.form.allowTimeEnd=a,console.log(t.form)}})},submit:function(){var t="/user/user/create";if(this.userId)t="/user/user/update";else{if(!this.form.nickName)return this.$dialog.alert({mes:"请输入用户名称"}),!1;if(!this.form.loginName)return this.$dialog.alert({mes:"请输入登录账号"}),!1;if(!this.form.password)return this.$dialog.alert({mes:"请输入密码"}),!1;if(!/(?!^[0-9]+$)(?!^[A-z]+$)(?!^[^A-z0-9]+$)^[^\s\u4e00-\u9fa5]{6,16}$/.test(this.form.password))return this.$dialog.alert({mes:"密码长度应为6-16位, 数字, 字母, 字符至少包含两种, 同时不能包含中文和空格!"}),!1;if(this.password2!=this.form.password)return this.$dialog.alert({mes:"两次密码不一致"}),!1;if(this.form.mobile){if(!this.$refs.phoneNumber.valid)return this.$dialog.alert({mes:"请输入正确的手机号码"}),!1}if(this.form.identityCard){if(!/^(\d{15}|\d{17}(\d|X))$/.test(this.form.identityCard))return this.$dialog.alert({mes:"请输入正确的身份证号"}),!1}}this.form.allowTimeEnd=this.allowTimeEnd+":00",this.form.allowTimeStart=this.allowTimeStart+":00";var e={};if(this.userId)e.mobile=this.form.mobile,e.identityCard=this.form.identityCard,e.userId=this.form.userId,e.status=this.form.status,e.allowTimeStart=this.form.allowTimeStart,e.allowTimeEnd=this.form.allowTimeEnd;else var e=this.form;e.status?e.status=1:e.status=0,console.log(this.form.status),this.save(t,e),console.log(e)},save:function(t,e){var i=this;this.$dialog.loading.open("数据保存中..."),this.postRequest(t,e).then(function(t){0==t.data.state?i.postRequest("/permission/tsysRoleUser/binDing",{roleId:i.checkList,userId:i.userId?i.userId:t.data.aaData.userId}).then(function(t){0==t.data.state&&(i.$dialog.loading.close(),i.$dialog.toast({mes:"保存成功",timeout:1500,icon:"success",callback:function(){i.$router.push({name:"f_add_user"})}}))}):(i.$dialog.loading.close(),i.$dialog.alert({mes:t.data.msg}))})}}}},biAy:function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return l});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("yd-layout",[i("div",{attrs:{id:"editUser"}},[i("div",{staticClass:"header",attrs:{slot:"top"},slot:"top"},[i("div",["merchant"==t.$root.userInfo.typeId?i("a",{staticClass:"header_left",attrs:{href:"#/f_add_user"}},[t._v("上一步")]):i("div")]),t._v(" "),i("div",{staticClass:"name"},[t._v(t._s(t.$route.query.userId?"编辑用户":"新增用户"))]),t._v(" "),i("div",["merchant"==t.$root.userInfo.typeId?i("a",{attrs:{href:"javascript:;"}}):i("div")])]),t._v(" "),i("div",{staticClass:"popup"},[i("yd-cell-group",[i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[i("div",{staticClass:"lable"},[i("strong",[t._v("用户名称")])])]),t._v(" "),t.isEdit?i("yd-input",{attrs:{slot:"right",max:"20","show-success-icon":!1,placeholder:"请输入(必填)"},slot:"right",model:{value:t.form.nickName,callback:function(e){t.$set(t.form,"nickName",e)},expression:"form.nickName"}}):i("span",{staticClass:"list_span",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.form.nickName))])],1),t._v(" "),i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[i("div",{staticClass:"lable"},[i("strong",[t._v("登录账号")])])]),t._v(" "),t.isEdit?i("yd-input",{attrs:{slot:"right",max:"20","show-success-icon":!1,placeholder:"请输入(必填)"},slot:"right",model:{value:t.form.loginName,callback:function(e){t.$set(t.form,"loginName",e)},expression:"form.loginName"}}):i("span",{staticClass:"list_span",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.form.loginName))])],1),t._v(" "),t.isEdit?i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[i("div",{staticClass:"lable"},[i("strong",[t._v("密码")])])]),t._v(" "),i("yd-input",{attrs:{slot:"right",type:"password",max:"20","show-success-icon":!1,placeholder:"请输入(必填)"},slot:"right",model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e(),t._v(" "),t.isEdit?i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[i("div",{staticClass:"lable"},[i("strong",[t._v("确认密码")])])]),t._v(" "),i("yd-input",{attrs:{slot:"right",type:"password",max:"20","show-success-icon":!1,placeholder:"请输入(必填)"},slot:"right",model:{value:t.password2,callback:function(e){t.password2=e},expression:"password2"}})],1):t._e(),t._v(" "),i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[i("div",{staticClass:"lable"},[i("strong",[t._v("手机号")])])]),t._v(" "),i("yd-input",{ref:"phoneNumber",attrs:{slot:"right",regex:"mobile","show-success-icon":!1,placeholder:"请输入手机号码"},slot:"right",model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),t._v(" "),i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[i("div",{staticClass:"lable"},[i("strong",[t._v("身份证")])])]),t._v(" "),i("yd-input",{attrs:{slot:"right",max:"20","show-success-icon":!1,placeholder:"请输入身份证号码"},slot:"right",model:{value:t.form.identityCard,callback:function(e){t.$set(t.form,"identityCard",e)},expression:"form.identityCard"}})],1),t._v(" "),"main"!=t.form.extend?i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[i("div",{staticClass:"lable"},[i("strong",[t._v("是否激活")])])]),t._v(" "),i("yd-switch",{attrs:{slot:"right"},slot:"right",model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1):t._e(),t._v(" "),i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[i("div",{staticClass:"lable"},[i("strong",[t._v("登录时间")])])]),t._v(" "),i("yd-datetime",{attrs:{slot:"right",type:"time"},slot:"right",model:{value:t.allowTimeStart,callback:function(e){t.allowTimeStart=e},expression:"allowTimeStart"}})],1),t._v(" "),i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[i("div",{staticClass:"lable"},[i("strong")])]),t._v(" "),i("yd-datetime",{attrs:{slot:"right",type:"time"},slot:"right",model:{value:t.allowTimeEnd,callback:function(e){t.allowTimeEnd=e},expression:"allowTimeEnd"}})],1),t._v(" "),i("div",{staticClass:"part_bd"},[i("div",{staticClass:"strong"},[t._v("角色绑定")]),t._v(" "),i("yd-checklist",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.partList,function(e){return i("yd-checklist-item",{attrs:{val:e.id}},[i("div",{staticStyle:{height:"50px","line-height":"50px"}},[t._v(t._s(e.name))])])}))],1)],1)],1),t._v(" "),i("div",{staticClass:"flex flex-x-center",staticStyle:{padding:"0 0.24rem"}},[i("div",{staticClass:"loginbtn flex flex-y-center flex-x-center",on:{click:t.submit}},[i("span",[t._v("保存")])])])])])},l=[]},i1gV:function(t,e,i){"use strict";function s(t){i("wkf0")}Object.defineProperty(e,"__esModule",{value:!0});var l=i("E58b"),a=i("biAy"),r=i("XyMi"),o=s,n=Object(r.a)(l.a,a.a,a.b,!1,o,null,null);e.default=n.exports},"uR++":function(t,e,i){e=t.exports=i("FZ+f")(!0),e.push([t.i,"#editUser{color:#2f3927}#editUser .lable{width:1.8rem;font-size:.3rem}#editUser .list_span{text-align:left;width:100%;color:#848484;font-weight:700}#editUser .loginbtn{width:100%;height:.78rem;background:#6fb138;border-radius:.39rem;color:#fff;font-size:.31rem;text-align:center}#editUser .yd-cell-arrow:after{margin-left:.1rem}#editUser .yd-btn-hollow{border:none}#editUser .add_user{color:#6fb138}#editUser .user_list{background:#fff}#editUser .user_list .list{margin-left:.2rem;border-bottom:1px solid #e4e4e4;line-height:1rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}#editUser .user_list .list .list_name{font-size:.28rem;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:flex}#editUser .user_list .list .list_name .name{margin-right:.1rem;max-width:3.65rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#editUser .user_list .list .list_name .status{-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:flex}#editUser .user_list .list .list_name .status span{display:inline-block;box-sizing:content-box;padding:.01rem .1rem;height:.24rem;line-height:.24rem;border-radius:.2rem;font-size:.2rem}#editUser .user_list .list .list_btn{width:2.5rem;display:-webkit-box;display:-webkit-flex;-webkit-box-flex:0;-webkit-flex-grow:0;flex-grow:0;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:0 .2rem 0 .1rem}#editUser .user_list .list .list_btn .list_edit{border-radius:.2rem;text-align:center;width:1rem;height:.5rem;line-height:.5rem;color:#6fb138;background:rgba(111,177,56,.1)}#editUser .user_list .list .list_btn .list_del{color:#ff3d15;background:rgba(255,61,21,.1)}#editUser .part_bd .strong{padding:.2rem .2rem .2rem .25rem;font-size:.3rem;color:#555;font-weight:700}","",{version:3,sources:["D:/Web/银川电子结算new/北环/前端/微信快捷下单/src/views/firstGYS/f_edit_user.vue"],names:[],mappings:"AACA,UACE,aAAe,CAChB,AACD,iBACI,aAAc,AACd,eAAkB,CACrB,AACD,qBACI,gBAAiB,AACjB,WAAY,AACZ,cAAe,AACf,eAAkB,CACrB,AACD,oBACI,WAAY,AACZ,cAAgB,AAChB,mBAAoB,AACpB,qBAAuB,AACvB,WAAY,AACZ,iBAAmB,AACnB,iBAAmB,CACtB,AACD,+BACI,iBAAoB,CACvB,AACD,yBACI,WAAa,CAChB,AACD,oBACI,aAAe,CAGlB,AACD,qBACI,eAAkB,CACrB,AACD,2BACM,kBAAmB,AACnB,gCAAiC,AACjC,iBAAkB,AAClB,oBAAqB,AACrB,qBAAsB,AACtB,aAAc,AACd,yBAA0B,AAC1B,sCAAuC,AAC/B,6BAA+B,CAC5C,AACD,sCACQ,iBAAkB,AAClB,mBAAoB,AACpB,oBAAqB,AACb,YAAa,AACrB,yBAA0B,AAC1B,2BAA4B,AACpB,mBAAoB,AAC5B,oBAAqB,AACrB,qBAAsB,AACtB,YAAc,CACrB,AACD,4CACU,mBAAoB,AACpB,kBAAmB,AACnB,mBAAoB,AACpB,gBAAiB,AACjB,sBAAwB,CACjC,AACD,8CACU,yBAA0B,AAC1B,2BAA4B,AACpB,mBAAoB,AAC5B,oBAAqB,AACrB,qBAAsB,AACtB,YAAc,CACvB,AACD,mDACY,qBAAsB,AACtB,uBAAwB,AACxB,qBAAsB,AACtB,cAAe,AACf,mBAAoB,AAEpB,oBAAqB,AACrB,eAAiB,CAC5B,AACD,qCACQ,aAAc,AACd,oBAAqB,AACrB,qBAAsB,AAEtB,mBAAoB,AACpB,oBAAqB,AACb,YAAa,AACrB,aAAc,AACd,yBAA0B,AAC1B,2BAA4B,AACpB,mBAAoB,AAC5B,yBAA0B,AAC1B,sCAAuC,AAC/B,8BAA+B,AACvC,uBAAyB,CAChC,AACD,gDACU,oBAAqB,AACrB,kBAAmB,AACnB,WAAY,AACZ,aAAc,AACd,kBAAmB,AACnB,cAAe,AAEf,8BAAoC,CAC7C,AACD,+CACU,cAAe,AAEf,6BAAmC,CAC5C,AACD,2BACI,iCAAkC,AAClC,gBAAiB,AACjB,WAAe,AACf,eAAkB,CACrB",file:"f_edit_user.vue",sourcesContent:["\n#editUser {\n  color: #2F3927;\n}\n#editUser .lable {\n    width: 1.8rem;\n    font-size: 0.3rem;\n}\n#editUser .list_span {\n    text-align: left;\n    width: 100%;\n    color: #848484;\n    font-weight: bold;\n}\n#editUser .loginbtn {\n    width: 100%;\n    height: 0.78rem;\n    background: #6FB138;\n    border-radius: 0.39rem;\n    color: #fff;\n    font-size: 0.31rem;\n    text-align: center;\n}\n#editUser .yd-cell-arrow:after {\n    margin-left: 0.1rem;\n}\n#editUser .yd-btn-hollow {\n    border: none;\n}\n#editUser .add_user {\n    color: #6fb138;\n    /*color: rgba(255,61,21,1);*/\n    /*color: rgba(107,124,140,1);*/\n}\n#editUser .user_list {\n    background: white;\n}\n#editUser .user_list .list {\n      margin-left: .2rem;\n      border-bottom: 1px solid #e4e4e4;\n      line-height: 1rem;\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: flex;\n      -webkit-box-pack: justify;\n      -webkit-justify-content: space-between;\n              justify-content: space-between;\n}\n#editUser .user_list .list .list_name {\n        font-size: .28rem;\n        -webkit-box-flex: 1;\n        -webkit-flex-grow: 1;\n                flex-grow: 1;\n        -webkit-box-align: center;\n        -webkit-align-items: center;\n                align-items: center;\n        display: -webkit-box;\n        display: -webkit-flex;\n        display: flex;\n}\n#editUser .user_list .list .list_name .name {\n          margin-right: .1rem;\n          max-width: 3.65rem;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n}\n#editUser .user_list .list .list_name .status {\n          -webkit-box-align: center;\n          -webkit-align-items: center;\n                  align-items: center;\n          display: -webkit-box;\n          display: -webkit-flex;\n          display: flex;\n}\n#editUser .user_list .list .list_name .status span {\n            display: inline-block;\n            box-sizing: content-box;\n            padding: .01rem .1rem;\n            height: .24rem;\n            line-height: .24rem;\n            /*line-height: 1;*/\n            border-radius: .2rem;\n            font-size: .2rem;\n}\n#editUser .user_list .list .list_btn {\n        width: 2.5rem;\n        display: -webkit-box;\n        display: -webkit-flex;\n        display: flex;\n        -webkit-box-flex: 0;\n        -webkit-flex-grow: 0;\n                flex-grow: 0;\n        display: flex;\n        -webkit-box-align: center;\n        -webkit-align-items: center;\n                align-items: center;\n        -webkit-box-pack: justify;\n        -webkit-justify-content: space-between;\n                justify-content: space-between;\n        padding: 0 .2rem 0 .1rem;\n}\n#editUser .user_list .list .list_btn .list_edit {\n          border-radius: .2rem;\n          text-align: center;\n          width: 1rem;\n          height: .5rem;\n          line-height: .5rem;\n          color: #6fb138;\n          /*border: 1px solid rgba(111, 177, 56, 1);*/\n          background: rgba(111, 177, 56, 0.1);\n}\n#editUser .user_list .list .list_btn .list_del {\n          color: #ff3d15;\n          /*border: 1px solid rgba(255,61,21,1);*/\n          background: rgba(255, 61, 21, 0.1);\n}\n#editUser .part_bd .strong {\n    padding: .2rem .2rem .2rem .25rem;\n    font-size: .3rem;\n    color: #555555;\n    font-weight: bold;\n}\n"],sourceRoot:""}])},wkf0:function(t,e,i){var s=i("uR++");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var l=i("rjj0").default;l("78d1027b",s,!0,{})}});
//# sourceMappingURL=60.cee2b146f0b8ced1ab0d.js.map