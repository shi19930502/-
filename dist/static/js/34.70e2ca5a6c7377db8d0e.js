webpackJsonp([34],{BO1k:function(t,e,r){t.exports={default:r("fxRn"),__esModule:!0}},EgQp:function(t,e,r){"use strict";e.a={data:function(){return{sellerList:[],sellerInfo:{},storeInfo:{},reputationLevel:"A"}},methods:{getStore:function(t,e){var r=this;this.postRequest("store/queryBySellerId",{sellerId:t}).then(function(t){t.data&&0==t.data.state&&(t.data.aaData?e&&e(t.data.aaData):r.$dialog.alert({mes:"未找到店铺信息~",callback:function(){r.$router.back()}}))})},toShopDetails:function(){this.$router.push({name:"ShopDetails",query:{sellerid:this.sellerId}})},getReputation:function(t){var e=this;this.postRequest("reputation/list",{customerId:t}).then(function(t){t.data&&0==t.data.state&&(t.data.aaData.length>0?e.reputationLevel=t.data.aaData[0].reputationLevel:e.reputationLevel="A")})}}}},"H+kO":function(t,e,r){"use strict";var i=r("mvHQ"),a=r.n(i),s=r("BO1k"),o=r.n(s);e.a={data:function(){return{categoryList:[],gbgoodsId:"",secondCategoryList:[],isUserEnter:!1,isOftenBuy:!1,pageNum:1}},methods:{addActiveStatus:function(t){var e=1;e=this.isUserEnter?0:1;for(var r in t)t[r].isActive=r==e;return t},menuClick:function(t,e){this.pageNum=1,this.productList=[],t.isActive||(t.isActive=!0);var r=!0,i=!1,a=void 0;try{for(var s,n=o()(this.categoryList);!(r=(s=n.next()).done);r=!0){var d=s.value;t.id!=d.id&&(d.isActive=!1)}}catch(t){i=!0,a=t}finally{try{!r&&n.return&&n.return()}finally{if(i)throw a}}if("oftenbuy"==t.id)this.secondCategoryList=[],this.isOftenBuy=!0,this.gbgoodsId="",this.getProductList();else if(this.isOftenBuy=!1,t.childList&&!e){this.secondCategoryList=t.childList,this.secondCategoryList[0].isActive=!0;for(var l in this.secondCategoryList)0!=l&&this.secondCategoryList[l].isActive&&(this.secondCategoryList[l].isActive=!1);this.gbgoodsId=this.secondCategoryList[0].gbgoodsId,this.getProductList()}else this.secondCategoryList=[],this.gbgoodsId=t.gbgoodsId,this.getProductList()},getCategoryList:function(){this.getCategoryListSaveLocal()},getCategoryListSaveLocal:function(){var t=this;this.postRequest("category/childList",{parentCategoryId:"top",orderField:"t.f_id",filteEnabled:1,filteDeleted:0,supplierId:this.$route.query.sellerId}).then(function(e){e&&e.data&&0==e.data.state&&(e.data.aaData.unshift({name:"全部",id:""}),e.data.aaData.unshift({name:"常买",id:"oftenbuy"}),t.categoryList=t.addActiveStatus(e.data.aaData),t.getSonCategoryList(t.categoryList),localStorage.setItem("categoryList",a()(t.categoryList)))})},getSonCategoryList:function(t){for(var e in t)if(t[e].childList)for(var r in t[e].childList)t[e].childList[r].isActive=0==r;this.isOftenBuy?this.getProductList():t.length>0&&t[1].childList?(this.secondCategoryList=t[1].childList,this.gbgoodsId=this.secondCategoryList[0].gbgoodsId,this.gbgoodsId=t[1].gbgoodsId,this.getProductList()):(this.secondCategoryList=[],t.length>0&&(this.gbgoodsId=t[1].gbgoodsId,this.getProductList()))}}}},NYsl:function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a});var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("yd-layout",[i("div",{attrs:{id:"UserShoppingCart"}},[t.dataList.length>0?t._l(t.dataList,function(e){return e.sellerProducts.length>0?i("div",{staticClass:"cart-group"},[i("div",{staticClass:"head flex flex-x-between flex-y-center"},[i("div",{staticClass:"flex flex-y-center",on:{click:function(r){t.toShopEvaluate(e)}}},[i("strong",[t._v(t._s(e.storeInfo.storeName))]),t._v(" "),i("yd-navbar-next-icon")],1),t._v(" "),i("div",[i("yd-icon",{attrs:{name:"delete",size:"0.4rem"},nativeOn:{click:function(r){t.del(e.sellerInfo.sellerId)}}})],1)]),t._v(" "),i("ul",{staticClass:"list"},t._l(e.sellerProducts,function(e){return i("li",{staticClass:"flex flex-y-center"},[i("div",{staticClass:"img"},[e.skuPicUrl?i("img",{attrs:{src:t.imgURL+e.skuPicUrl}}):e.proPicUrl?i("img",{attrs:{src:t.imgURL+e.proPicUrl}}):i("img",{attrs:{src:r("TbgW")}})]),t._v(" "),i("div",{staticClass:"flex-item-6"},[i("p",[t._v(t._s(e.productName+"["+e.skuName+"]"))]),t._v(" "),i("div",{staticClass:"flex flex-x-between"},[i("span",{staticStyle:{color:"#989E92"}},[t._v(t._s("x"+e.quantity))]),t._v(" "),e.promotionPrice>0&&e.promotionBasePrice>0?i("span",{staticClass:"price"},[t._v(t._s("￥"+100*e.promotionPrice*e.quantity/100))]):i("span",{staticClass:"price"},[t._v(t._s("￥"+100*e.price*e.quantity/100))])])])])})),t._v(" "),i("div",{staticClass:"js flex flex-y-center flex-x-end"},[i("span",[t._v("合计")]),t._v(" "),i("span",{staticClass:"price"},[t._v(t._s("￥"+e.orderTotal))]),t._v(" "),i("div",{staticClass:"btn",on:{click:function(r){t.toOrderSettlement(e)}}},[t._v("去结算")])])]):t._e()}):i("div",{staticClass:"empty"},[t._v("购物车什么都还没有~~ ")])],2)])},a=[]},Z3IP:function(t,e,r){"use strict";var i=r("mvHQ"),a=r.n(i),s=r("vsZy"),o=r("EgQp"),n=r("fYxN");e.a={mixins:[s.a,o.a,n.a],data:function(){return{sellerList:[],dataList:[],orderTotal:0}},created:function(){this.getSellers(),this.getStoreCar()},mounted:function(){},methods:{toShopEvaluate:function(t){this.$router.push({name:"ShopDetails",query:{sellerid:t.sellerInfo.sellerId}})},toOrderSettlement:function(t){var e=this;for(var r in t.sellerProducts)t.sellerProducts[r].btnText="备注",t.sellerProducts[r].showRemarks=!1;var i={settlementGoods:t.sellerProducts},s=this.getOrderTotal(t.sellerProducts).priceTotal,o=this.getOrderTotal(t.sellerProducts).quantityTotal;this.$dialog.confirm({title:t.storeInfo.storeName,mes:"共"+t.sellerProducts.length+"件商品,总数量"+o+",总价:￥"+s,opts:function(){localStorage.setItem("settlementParam",a()(i)),e.$router.push({name:"OrderSettlement",query:{sellerId:t.sellerInfo.sellerId,sellerName:t.storeInfo.storeName,distributionType:t.storeInfo.distributionToday}})}})},del:function(t){var e=this;this.$dialog.confirm({title:"提示",mes:"该操作不可逆，是否继续",opts:function(){e.postRequest("shippingcar/queryGrouplist",{buyerId:e.userInfo.typeCode,sellerId:t}).then(function(r){if(r.data&&0==r.data.state)for(var i in r.data.aaData)if(t==i){var a=r.data.aaData[i];for(var s in a)e.deleteShopCarById(a[s].id)}})}})},deleteShopCarById:function(t){var e=this;this.postRequest("shippingcar/delete",{id:t}).then(function(t){t.data&&0==t.data.state&&e.getStoreCar()})},getStoreCar:function(){var t=this;this.postRequest("shippingcar/queryGrouplist",{buyerId:this.userInfo.typeCode}).then(function(e){if(e.data&&0==e.data.state){var r=[];for(var i in e.data.aaData)for(var a in t.sellerList)t.sellerList[a].sellerId==i-0&&function(t,i){var a=this;this.getStore(this.sellerList[i].sellerId,function(s){var o={sellerInfo:a.sellerList[i],sellerProducts:e.data.aaData[t],orderTotal:a.getOrderTotal(e.data.aaData[t]).priceTotal};o.storeInfo=s,console.log(o),r.push(o)})}.bind(t)(i,a);t.dataList=r}})},getSellers:function(){var t=this;this.postRequest("suppliercollection/querySellerByCustomerId",{customerId:this.userInfo.typeCode}).then(function(e){e.data&&0==e.data.state&&(t.sellerList=e.data.aaData)})}}}},bPPj:function(t,e,r){e=t.exports=r("FZ+f")(!0),e.push([t.i,"#UserShoppingCart .yd-back-icon:before,#UserShoppingCart .yd-next-icon:before{font-size:.3rem}#UserShoppingCart .cart-group{margin-bottom:.3rem;background:#fff}#UserShoppingCart .cart-group .head{padding:.2rem .25rem;border-bottom:1px solid #ddd}#UserShoppingCart .cart-group .head strong{margin-top:-.05rem;font-size:.3rem;margin-right:.1rem}#UserShoppingCart .cart-group ul.list{padding-left:.24rem;border-bottom:1px solid #d9d9d9}#UserShoppingCart .cart-group ul.list li{border-bottom:1px solid #d9d9d9;padding:.1rem .25rem .1rem 0}#UserShoppingCart .cart-group ul.list li .img{height:.8rem;width:.8rem;border-radius:2px;margin-right:.2rem;overflow:hidden}#UserShoppingCart .cart-group ul.list li .img img{width:100%;height:100%}#UserShoppingCart .cart-group ul.list li p{margin:.08rem 0}#UserShoppingCart .cart-group ul.list li .price{font-size:.3rem;color:#ff6a16;font-weight:700}#UserShoppingCart .cart-group ul.list li:last-child{border-bottom:none}#UserShoppingCart .cart-group .js{padding:.25rem}#UserShoppingCart .cart-group .js .btn{background:#6fb138;font-size:.25rem;color:#fff;padding:.1rem .15rem;border-radius:3px}#UserShoppingCart .cart-group .js .price{font-size:.35rem;color:#ff6a16;font-weight:600;margin-right:.1rem}","",{version:3,sources:["D:/Web/银川电子结算new/北环/前端/微信快捷下单/src/views/user/UserShoppingCart.vue"],names:[],mappings:"AACA,8EAEE,eAAkB,CACnB,AACD,8BACE,oBAAsB,AACtB,eAAiB,CAClB,AACD,oCACI,qBAAwB,AACxB,4BAA8B,CACjC,AACD,2CACM,mBAAqB,AACrB,gBAAkB,AAClB,kBAAqB,CAC1B,AACD,sCACI,oBAAsB,AACtB,+BAAiC,CACpC,AACD,yCACM,gCAAiC,AACjC,4BAAiC,CACtC,AACD,8CACQ,aAAe,AACf,YAAc,AACd,kBAAmB,AACnB,mBAAqB,AACrB,eAAiB,CACxB,AACD,kDACU,WAAY,AACZ,WAAa,CACtB,AACD,2CACQ,eAAkB,CACzB,AACD,gDACQ,gBAAkB,AAClB,cAAe,AACf,eAAiB,CACxB,AACD,oDACM,kBAAoB,CACzB,AACD,kCACI,cAAiB,CACpB,AACD,uCACM,mBAAoB,AACpB,iBAAmB,AACnB,WAAY,AACZ,qBAAwB,AACxB,iBAAmB,CACxB,AACD,yCACM,iBAAmB,AACnB,cAAe,AACf,gBAAiB,AACjB,kBAAqB,CAC1B",file:"UserShoppingCart.vue",sourcesContent:["\n#UserShoppingCart .yd-back-icon:before,\n#UserShoppingCart .yd-next-icon:before {\n  font-size: 0.3rem;\n}\n#UserShoppingCart .cart-group {\n  margin-bottom: 0.3rem;\n  background: #fff;\n}\n#UserShoppingCart .cart-group .head {\n    padding: 0.2rem 0.25rem;\n    border-bottom: 1px solid #ddd;\n}\n#UserShoppingCart .cart-group .head strong {\n      margin-top: -0.05rem;\n      font-size: 0.3rem;\n      margin-right: 0.1rem;\n}\n#UserShoppingCart .cart-group ul.list {\n    padding-left: 0.24rem;\n    border-bottom: 1px solid #d9d9d9;\n}\n#UserShoppingCart .cart-group ul.list li {\n      border-bottom: 1px solid #d9d9d9;\n      padding: 0.1rem 0.25rem 0.1rem 0;\n}\n#UserShoppingCart .cart-group ul.list li .img {\n        height: 0.8rem;\n        width: 0.8rem;\n        border-radius: 2px;\n        margin-right: 0.2rem;\n        overflow: hidden;\n}\n#UserShoppingCart .cart-group ul.list li .img img {\n          width: 100%;\n          height: 100%;\n}\n#UserShoppingCart .cart-group ul.list li p {\n        margin: 0.08rem 0;\n}\n#UserShoppingCart .cart-group ul.list li .price {\n        font-size: 0.3rem;\n        color: #FF6A16;\n        font-weight: 700;\n}\n#UserShoppingCart .cart-group ul.list li:last-child {\n      border-bottom: none;\n}\n#UserShoppingCart .cart-group .js {\n    padding: 0.25rem;\n}\n#UserShoppingCart .cart-group .js .btn {\n      background: #6FB138;\n      font-size: 0.25rem;\n      color: #fff;\n      padding: 0.1rem 0.15rem;\n      border-radius: 3px;\n}\n#UserShoppingCart .cart-group .js .price {\n      font-size: 0.35rem;\n      color: #FF6A16;\n      font-weight: 600;\n      margin-right: 0.1rem;\n}\n"],sourceRoot:""}])},e8EQ:function(t,e,r){"use strict";function i(t){r("gFtl")}Object.defineProperty(e,"__esModule",{value:!0});var a=r("Z3IP"),s=r("NYsl"),o=r("XyMi"),n=i,d=Object(o.a)(a.a,s.a,s.b,!1,n,null,null);e.default=d.exports},fYxN:function(t,e,r){"use strict";var i=r("BO1k"),a=r.n(i);e.a={data:function(){return{carIds:[],ShippingcarList:[],alreadyChosenGoods:[],orderTotal:0}},methods:{createShippingcar:function(t,e){var r,i=this,s={buyerId:this.userInfo.typeCode,productId:t.productId,productName:t.productName,skuId:t.id,skuName:t.name,quantity:t.quantity,comment:t.remark,sellerId:this.sellerId};t.skuId&&(s.skuId=t.skuId),t.skuName&&(s.skuName=t.skuName);var o=[],n=!0,d=!1,l=void 0;try{for(var c,u=a()(this.carIds);!(n=(c=u.next()).done);n=!0){var p=c.value;o.push(p.skuId)}}catch(t){d=!0,l=t}finally{try{!n&&u.return&&u.return()}finally{if(d)throw l}}if(this.isInArray(o,s.skuId)){r=0==t.quantity?"shippingcar/delete":"shippingcar/update";for(var g in this.carIds)this.carIds[g].skuId!=t.id&&this.carIds[g].skuId!=t.skuId||(s.id=this.carIds[g].carId);this.postRequest(r,s).then(function(e){e.data&&0==e.data.state?(t.oldquantity=t.quantity,i.getShippingcarList()):(i.$dialog.toast({mes:e.data.msg,timeout:1500}),t.quantity=t.oldquantity)})}else r="shippingcar/create",this.postRequest(r,s).then(function(e){if(e.data&&0==e.data.state){var r={skuId:t.id||t.skuId,carId:e.data.aaData.id};i.carIds.push(r),t.oldquantity=t.quantity,i.getShippingcarList()}else i.$dialog.toast({mes:e.data.msg,timeout:1500}),t.quantity=null})},getShippingcarList:function(t,e){var r=this;this.postRequest("shippingcar/queryGrouplist",{buyerId:this.$root.userInfo.typeCode,sellerId:this.$route.query.sellerId}).then(function(i){if(i.data&&0==i.data.state){r.ShippingcarList=i.data.aaData;var s=[];r.alreadyChosenGoods=[];for(var o in i.data.aaData){r.sellerId==o&&(r.alreadyChosenGoods=i.data.aaData[o]);var n=!0,d=!1,l=void 0;try{for(var c,u=a()(i.data.aaData[o]);!(n=(c=u.next()).done);n=!0){var p=c.value,g={skuId:p.skuId,carId:p.id};s.push(g)}}catch(t){d=!0,l=t}finally{try{!n&&u.return&&u.return()}finally{if(d)throw l}}}r.carIds=s;for(var h=[],f=0;f<r.alreadyChosenGoods.length;f++)for(var A=0;A<r.carSettlementGoods.length;A++)r.alreadyChosenGoods[f].id==r.carSettlementGoods[A]&&h.push(r.carSettlementGoods[A]);r.carSettlementGoods=h,r.showShopCar&&r.carSettlementGoods.length<=0&&(r.isCheckAll=!1,r.$refs.checklistDemo.$emit("ydui.checklist.checkall",r.isCheckAll)),r.orderTotal=r.getOrderTotal(r.alreadyChosenGoods).priceTotal,t&&(e?r.getProductList():r.getCategoryList()),r.shuru=!0}})},getOrderTotal:function(t){var e=0,r=0;for(var i in t)r+=t[i].quantity,t[i].promotionPrice>0&&t[i].promotionBasePrice>0?e+=t[i].quantity*(100*t[i].promotionPrice):e+=t[i].quantity*(100*t[i].price);return{priceTotal:(e/100).toFixed(2),quantityTotal:(r-0).toFixed(2)}},isInArray:function(t,e){for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},countVisits:function(){this.postRequest("store/countVisits",{sellerId:this.sellerId}).then(function(t){t.data&&t.data.state})}}}},fxRn:function(t,e,r){r("+tPU"),r("zQR9"),t.exports=r("g8Ux")},g8Ux:function(t,e,r){var i=r("77Pl"),a=r("3fs2");t.exports=r("FeBl").getIterator=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},gFtl:function(t,e,r){var i=r("bPPj");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=r("rjj0").default;a("5791f0bd",i,!0,{})},vsZy:function(t,e,r){"use strict";var i=r("BO1k"),a=r.n(i),s=r("pyzf");r("fYxN"),r("H+kO");e.a={data:function(){return{imgURL:s.a.imgURL,userInfo:JSON.parse(localStorage.getItem("quickUserInfo")),logisticsType:[{type:0,name:"自提",selected:!1},{type:1,name:"物流配送",selected:!0}],payType:[{type:0,name:"现金支付",selected:!0},{type:1,name:"POS刷卡",selected:!1},{type:2,name:"微信支付",selected:!1},{type:3,name:"支付宝支付",selected:!1}],distributionType:[{distributionType:0,name:"次日配送",selected:!0},{distributionType:1,name:"当日配送",selected:!1}]}},mounted:function(){},methods:{uniqueArr:function(t){var e=[],r={},i=!0,s=!1,o=void 0;try{for(var n,d=a()(t);!(i=(n=d.next()).done);i=!0){var l=n.value;r[l]||(e.push(l),r[l]=1)}}catch(t){s=!0,o=t}finally{try{!i&&d.return&&d.return()}finally{if(s)throw o}}return e},GetDateStr:function(t){var e=new Date;e.setDate(e.getDate()+t);var r=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),s=e.getDay();return i<10&&(i="0"+i),a<10&&(a="0"+a),{date:r+"-"+i+"-"+a,week:"星期"+"日一二三四五六".charAt(s)}}}}}});
//# sourceMappingURL=34.70e2ca5a6c7377db8d0e.js.map